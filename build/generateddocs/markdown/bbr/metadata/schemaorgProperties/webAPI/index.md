
# WebAPI properties (Schema)

`cdif.bbr.metadata.schemaorgProperties.webAPI` *v0.1*

Schema defining properties for documenting a WebAPI used as a resource distribution option.

[*Status*](http://www.opengis.net/def/status): Under development

## Description

## Person properties

Defines a set of properties for use describing a person for the schema.org implementation of the [Cross Domain Interoperability Framework](https://cross-domain-interoperability-framework.github.io/cdifbook/metadata/schemaorgimplementation.html#implementation-of-metadata-content-items) (CDIF) discovery profile.
## Examples

### Example WebAPI distribution.
Example distribution webAPI, based on schema.org Action
#### json
```json
{
    "@context": {
        "schema": "http://schema.org/",
        "ex": "https://example.org/",
        "xsd": "http://www.w3.org/2001/XMLSchema#"
    },
    "@id": "ex:exampleWebAPI_354btrh",
    "@type": ["schema:WebAPI"],
    "schema:serviceType": "pvbn",
    "schema:termsOfService": {
        "@type": "schema:CreativeWork",
        "schema:name": "tUMFszqdkAZmXTx",
        "schema:description": "gxtJAxCAkaYFOJfsrtWn",
        "schema:url": "http://example.com/resource/termsDoc35yh"
    },
    "schema:documentation": {
        "@type": "schema:CreativeWork",
        "schema:name": "OgsRNbhr",
        "schema:description": "XxEWiBXJhROXXws",
        "schema:url": "http://example.com/resource/documentation35hn3"
    },
    "schema:potentialAction": [
        {
            "@id": "ex:exampleAction_37467",
            "@type": "schema:Action",
            "schema:name": "Download Data",
            "schema:target": {
                "@type": "schema:EntryPoint",
                "schema:description": "endpoint URL to invoke the action; content type spcifies the supported content type(s) for an EntryPoint response",
                "schema:urlTemplate": "http://portal.chordsrt.com/api/v1/data.{encoding}?instruments={instruments}&start={start}&end={end}",
                "schema:httpMethod": ["GET"],
                "schema:contentType": [
                    "text/csv",
                    "application/json"
                ]
            },
            "schema:result": {
                "@type": "schema:DataDownload",
                "schema:encodingFormat": ["text/csv"],
                "schema:description": "a description the file format(s) generated by api requests"
            },
            "schema:object": {
                "@type": "schema:DataFeed",
                "schema:description": "description of the structure of the api result data",
                "schema:variableMeasured": [
                    {
                        "@type": ["schema:PropertyValue"],
                        "schema:name": "temperature",
                        "schema:description": "temperature of the sample",
                        "schema:propertyID": ["http://qudt.org/defs/temperature"]
                    },
                    {
                        "@id": "ex:propertyValue_zZc",
                        "@type": ["schema:PropertyValue"],
                        "schema:name": "Viscosity",
                        "schema:propertyID":  ["http://ogc.org/defs/g35408y"],
                        "schema:description":"a quantity expressing the magnitude of internal friction"
                    }
                ]
            },
            "schema:query-input": [
                {
                    "@id": "ex:input_encoding",
                    "@type": "schema:PropertyValueSpecification",
                    "schema:valueName": "encoding",
                    "schema:description": "format of requested result",
                    "schema:valueRequired": false,
                    "schema:valuePattern": "^[A-Za-z][A-Za-z0-9]*$"
                },
                {
                    "@id": "ex:input_instruments",
                    "@type": "schema:PropertyValueSpecification",
                    "schema:valueName": "instruments",
                    "schema:description": "sensor for data requested",
                    "schema:valueRequired": false,
                    "schema:valuePattern": "^[A-Za-z][A-Za-z0-9 ,]*$"
                },
                {
                    "@id": "ex:input_start",
                    "@type": "schema:PropertyValueSpecification",
                    "schema:valueName": "start",
                    "schema:description": "beginning of time interval for requested data",
                    "schema:valueRequired": false,
                    "schema:valuePattern": "^\\d{4}-\\d{2}-\\d{2}(?:T\\d{2}:\\d{2}(?::\\d{2}(?:\\.\\d+)?)?(?:Z|[+\\-]\\d{2}(?::?\\d{2})?)?)?$"
                },
                {
                    "@id": "ex:input_end",
                    "@type": "schema:PropertyValueSpecification",
                    "schema:valueName": "end",
                    "schema:description": "end of time interval for requested data",
                    "schema:valueRequired": true,
                    "schema:valuePattern": "^\\d{4}-\\d{2}-\\d{2}(?:T\\d{2}:\\d{2}(?::\\d{2}(?:\\.\\d+)?)?(?:Z|[+\\-]\\d{2}(?::?\\d{2})?)?)?$"
                }
            ]
        },
        {
            "@id": "ex:exampleAction_37467",
            "@type": "schema:Action",
            "schema:name": "List instruments",
            "schema:target": {
                "@type": "schema:EntryPoint",
                "schema:description": "endpoint URL to invoke the action; content type spcifies the supported content type(s) for an EntryPoint response",
                "schema:urlTemplate": "http://portal.chordsrt.com/api/v1/data/instruments",
                "schema:httpMethod": ["GET"],
                "schema:contentType": ["text/plain"]
            },
            "schema:result": {
                "@type": "schema:DataDownload",
                "schema:encodingFormat": ["text/plain"],
                "schema:description": "plain text list of instruments available"
            }
        }
    ]
}
```

#### jsonld
```jsonld
{
  "@context": [
    {
      "schema": "http://schema.org/"
    },
    "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/schemaorgProperties/webAPI/context.jsonld",
    {
      "schema": "http://schema.org/",
      "ex": "https://example.org/",
      "xsd": "http://www.w3.org/2001/XMLSchema#"
    }
  ],
  "@id": "ex:exampleWebAPI_354btrh",
  "@type": [
    "schema:WebAPI"
  ],
  "schema:serviceType": "pvbn",
  "schema:termsOfService": {
    "@type": "schema:CreativeWork",
    "schema:name": "tUMFszqdkAZmXTx",
    "schema:description": "gxtJAxCAkaYFOJfsrtWn",
    "schema:url": "http://example.com/resource/termsDoc35yh"
  },
  "schema:documentation": {
    "@type": "schema:CreativeWork",
    "schema:name": "OgsRNbhr",
    "schema:description": "XxEWiBXJhROXXws",
    "schema:url": "http://example.com/resource/documentation35hn3"
  },
  "schema:potentialAction": [
    {
      "@id": "ex:exampleAction_37467",
      "@type": "schema:Action",
      "schema:name": "Download Data",
      "schema:target": {
        "@type": "schema:EntryPoint",
        "schema:description": "endpoint URL to invoke the action; content type spcifies the supported content type(s) for an EntryPoint response",
        "schema:urlTemplate": "http://portal.chordsrt.com/api/v1/data.{encoding}?instruments={instruments}&start={start}&end={end}",
        "schema:httpMethod": [
          "GET"
        ],
        "schema:contentType": [
          "text/csv",
          "application/json"
        ]
      },
      "schema:result": {
        "@type": "schema:DataDownload",
        "schema:encodingFormat": [
          "text/csv"
        ],
        "schema:description": "a description the file format(s) generated by api requests"
      },
      "schema:object": {
        "@type": "schema:DataFeed",
        "schema:description": "description of the structure of the api result data",
        "schema:variableMeasured": [
          {
            "@type": [
              "schema:PropertyValue"
            ],
            "schema:name": "temperature",
            "schema:description": "temperature of the sample",
            "schema:propertyID": [
              "http://qudt.org/defs/temperature"
            ]
          },
          {
            "@id": "ex:propertyValue_zZc",
            "@type": [
              "schema:PropertyValue"
            ],
            "schema:name": "Viscosity",
            "schema:propertyID": [
              "http://ogc.org/defs/g35408y"
            ],
            "schema:description": "a quantity expressing the magnitude of internal friction"
          }
        ]
      },
      "schema:query-input": [
        {
          "@id": "ex:input_encoding",
          "@type": "schema:PropertyValueSpecification",
          "schema:valueName": "encoding",
          "schema:description": "format of requested result",
          "schema:valueRequired": false,
          "schema:valuePattern": "^[A-Za-z][A-Za-z0-9]*$"
        },
        {
          "@id": "ex:input_instruments",
          "@type": "schema:PropertyValueSpecification",
          "schema:valueName": "instruments",
          "schema:description": "sensor for data requested",
          "schema:valueRequired": false,
          "schema:valuePattern": "^[A-Za-z][A-Za-z0-9 ,]*$"
        },
        {
          "@id": "ex:input_start",
          "@type": "schema:PropertyValueSpecification",
          "schema:valueName": "start",
          "schema:description": "beginning of time interval for requested data",
          "schema:valueRequired": false,
          "schema:valuePattern": "^\\d{4}-\\d{2}-\\d{2}(?:T\\d{2}:\\d{2}(?::\\d{2}(?:\\.\\d+)?)?(?:Z|[+\\-]\\d{2}(?::?\\d{2})?)?)?$"
        },
        {
          "@id": "ex:input_end",
          "@type": "schema:PropertyValueSpecification",
          "schema:valueName": "end",
          "schema:description": "end of time interval for requested data",
          "schema:valueRequired": true,
          "schema:valuePattern": "^\\d{4}-\\d{2}-\\d{2}(?:T\\d{2}:\\d{2}(?::\\d{2}(?:\\.\\d+)?)?(?:Z|[+\\-]\\d{2}(?::?\\d{2})?)?)?$"
        }
      ]
    },
    {
      "@id": "ex:exampleAction_37467",
      "@type": "schema:Action",
      "schema:name": "List instruments",
      "schema:target": {
        "@type": "schema:EntryPoint",
        "schema:description": "endpoint URL to invoke the action; content type spcifies the supported content type(s) for an EntryPoint response",
        "schema:urlTemplate": "http://portal.chordsrt.com/api/v1/data/instruments",
        "schema:httpMethod": [
          "GET"
        ],
        "schema:contentType": [
          "text/plain"
        ]
      },
      "schema:result": {
        "@type": "schema:DataDownload",
        "schema:encodingFormat": [
          "text/plain"
        ],
        "schema:description": "plain text list of instruments available"
      }
    }
  ]
}
```

#### ttl
```ttl
@prefix ex: <https://example.org/> .
@prefix schema1: <http://schema.org/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

ex:exampleWebAPI_354btrh a schema1:WebAPI ;
    schema1:documentation [ a schema1:CreativeWork ;
            schema1:description "XxEWiBXJhROXXws" ;
            schema1:name "OgsRNbhr" ;
            schema1:url "http://example.com/resource/documentation35hn3" ] ;
    schema1:potentialAction ex:exampleAction_37467 ;
    schema1:serviceType "pvbn" ;
    schema1:termsOfService [ a schema1:CreativeWork ;
            schema1:description "gxtJAxCAkaYFOJfsrtWn" ;
            schema1:name "tUMFszqdkAZmXTx" ;
            schema1:url "http://example.com/resource/termsDoc35yh" ] .

ex:exampleAction_37467 a schema1:Action ;
    schema1:name "Download Data",
        "List instruments" ;
    schema1:object [ a schema1:DataFeed ;
            schema1:description "description of the structure of the api result data" ;
            schema1:variableMeasured [ a schema1:PropertyValue ;
                    schema1:description "temperature of the sample" ;
                    schema1:name "temperature" ;
                    schema1:propertyID "http://qudt.org/defs/temperature" ],
                ex:propertyValue_zZc ] ;
    schema1:query-input ex:input_encoding,
        ex:input_end,
        ex:input_instruments,
        ex:input_start ;
    schema1:result [ a schema1:DataDownload ;
            schema1:description "a description the file format(s) generated by api requests" ;
            schema1:encodingFormat "text/csv" ],
        [ a schema1:DataDownload ;
            schema1:description "plain text list of instruments available" ;
            schema1:encodingFormat "text/plain" ] ;
    schema1:target [ a schema1:EntryPoint ;
            schema1:contentType "text/plain" ;
            schema1:description "endpoint URL to invoke the action; content type spcifies the supported content type(s) for an EntryPoint response" ;
            schema1:httpMethod "GET" ;
            schema1:urlTemplate "http://portal.chordsrt.com/api/v1/data/instruments" ],
        [ a schema1:EntryPoint ;
            schema1:contentType "application/json",
                "text/csv" ;
            schema1:description "endpoint URL to invoke the action; content type spcifies the supported content type(s) for an EntryPoint response" ;
            schema1:httpMethod "GET" ;
            schema1:urlTemplate "http://portal.chordsrt.com/api/v1/data.{encoding}?instruments={instruments}&start={start}&end={end}" ] .

ex:input_encoding a schema1:PropertyValueSpecification ;
    schema1:description "format of requested result" ;
    schema1:valueName "encoding" ;
    schema1:valuePattern "^[A-Za-z][A-Za-z0-9]*$" ;
    schema1:valueRequired false .

ex:input_end a schema1:PropertyValueSpecification ;
    schema1:description "end of time interval for requested data" ;
    schema1:valueName "end" ;
    schema1:valuePattern "^\\d{4}-\\d{2}-\\d{2}(?:T\\d{2}:\\d{2}(?::\\d{2}(?:\\.\\d+)?)?(?:Z|[+\\-]\\d{2}(?::?\\d{2})?)?)?$" ;
    schema1:valueRequired true .

ex:input_instruments a schema1:PropertyValueSpecification ;
    schema1:description "sensor for data requested" ;
    schema1:valueName "instruments" ;
    schema1:valuePattern "^[A-Za-z][A-Za-z0-9 ,]*$" ;
    schema1:valueRequired false .

ex:input_start a schema1:PropertyValueSpecification ;
    schema1:description "beginning of time interval for requested data" ;
    schema1:valueName "start" ;
    schema1:valuePattern "^\\d{4}-\\d{2}-\\d{2}(?:T\\d{2}:\\d{2}(?::\\d{2}(?:\\.\\d+)?)?(?:Z|[+\\-]\\d{2}(?::?\\d{2})?)?)?$" ;
    schema1:valueRequired false .

ex:propertyValue_zZc a schema1:PropertyValue ;
    schema1:description "a quantity expressing the magnitude of internal friction" ;
    schema1:name "Viscosity" ;
    schema1:propertyID "http://ogc.org/defs/g35408y" .


```

## Schema

```yaml
$schema: https://json-schema.org/draft/2020-12/schema
title: Direct data access to a resource via web servcie
description: use schema.org Action to document url or url template and parameters
  to request data through a web accessible location. At this point, schema is set
  up for one action-- an HTTP Get that requests data. The url template parameters
  (in curly brackets '{}') specify query paramters to filter the source data, request
  particular output formats or other aspects of data.
type: object
properties:
  '@type':
    type: array
    items:
      type: string
    contains:
      const: schema:WebAPI
    minItems: 1
  schema:serviceType:
    anyOf:
    - type: string
    - $ref: '#/$defs/DefinedTerm'
    description: specify the kind of service. Ideally this should be a resolvable
      identifier. Currently there is no widely adopted registry for serviceType identifiers,
      in large part because services might be defined at different levels of granularity,
      and classifications might focus on function, data formats, thematic content,
      security, or other aspects of the service definition. For interoperability,
      there must be an external arrangement between data providers and consumers on
      the strings that will be used to specify service types.
  schema:termsOfService:
    description: Description of access privileges required to use the API, e.g. registration,
      licensing, payments. Note that access constraints applying to all distributions
      of the resource should be specified in the access constraints for the resource
      description as a whole.
    oneOf:
    - type: string
    - $ref: '#/$defs/LabeledLink'
  schema:documentation:
    description: a document that provides a machine-actionable description of a service
      instance. Examples include OpenAPI documents, OGC Capabilities documents. Software
      designed to utilise a particular service type will typically include functionality
      to parse such a description document and engage with the service endpoint. If
      such a document is available for the service instance providing the resource
      distribution, it should be included in the distribution metadata.
    oneOf:
    - type: string
    - $ref: '#/$defs/LabeledLink'
  schema:potentialAction:
    type: array
    description: actions that can be invoked via the API
    items:
      $ref: '#/$defs/Action'
required:
- schema:serviceType
- schema:potentialAction
$defs:
  LabeledLink:
    $ref: https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/schemaorgProperties/labeledLink/schema.yaml
  DefinedTerm:
    $ref: https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/schemaorgProperties/definedTerm/schema.yaml
  Action:
    $ref: https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/schemaorgProperties/action/schema.yaml
x-jsonld-prefixes:
  schema: http://schema.org/

```

Links to the schema:

* YAML version: [schema.yaml](https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/schemaorgProperties/webAPI/schema.json)
* JSON version: [schema.json](https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/schemaorgProperties/webAPI/schema.yaml)


# JSON-LD Context

```jsonld
{
  "@context": {
    "schema": "http://schema.org/",
    "@version": 1.1
  }
}
```

You can find the full JSON-LD context here:
[context.jsonld](https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/schemaorgProperties/webAPI/context.jsonld)

## Sources

* [schema.org](https://schema.org/Action)
* [schema.org issue 62](https://github.com/schemaorg/suggestions-questions-brainstorming/issues/62)
* [schema.org discussion on Action](https://schema.org/docs/actions.html)

# For developers

The source code for this Building Block can be found in the following repository:

* URL: [https://github.com/usgin/metadataBuildingBlocks](https://github.com/usgin/metadataBuildingBlocks)
* Path: `_sources/schemaorgProperties/webAPI`

