Validation report for cdif.bbr.metadata.xasProperties.xasXdiTabularTextDataset - XDI data structure description
Generated 2026-02-06T15:28:49.762303+00:00
=== Files ===
Using exampleXdiTabularTextDataset.json from examples
JSON-LD context is present - uplifting
Output JSON-LD example_1_1.jsonld created
Output Turtle example_1_1.ttl created
=== End Files ===

=== JSON Schema ===

** Validation error **
ValidationError: 'cdi:has_DataStructureComponent' is a required property

Failed validating 'required' in schema:
    {'$schema': 'https://json-schema.org/draft/2020-12/schema',
     'properties': {'@type': {'const': 'cdi:WideDataStructure'},
                    'cdi:allowsDuplicates': {'default': False,
                                             'type': 'boolean'},
                    'cdi:arrayBase': {'default': 1, 'type': 'integer'},
                    'cdi:commentPrefix': {'type': 'string'},
                    'cdi:hasHeader': {'type': 'boolean'},
                    'cdi:has_DataStructureComponent': {'items': {'properties': {'@type': {'oneOf': [{'const': 'cdi:IdentifierComponent'},
                                                                                                    {'const': 'cdi:MeasureComponent'}]},
                                                                                'cdi:has': {'properties': {'@type': {'const': 'cdi:ValueMapping'},
                                                                                                           'cdi:hasIndex': {'type': 'integer'},
                                                                                                           'cdi:haslength': {'type': 'integer'}},
                                                                                            'required': ['cdi:ValueMapping'],
                                                                                            'type': 'object'},
                                                                                'cdi:isDefinedBy_InstanceVariable': {'description': 'this '
                                                                                                                                    'must '
                                                                                                                                    'be '
                                                                                                                                    'a '
                                                                                                                                    'reference '
                                                                                                                                    'to '
                                                                                                                                    'a '
                                                                                                                                    'variable '
                                                                                                                                    'defined '
                                                                                                                                    'in '
                                                                                                                                    'the '
                                                                                                                                    'schema:variableMeasured '
                                                                                                                                    'part '
                                                                                                                                    'of '
                                                                                                                                    'the '
                                                                                                                                    'metadata '
                                                                                                                                    'record; '
                                                                                                                                    'This '
                                                                                                                                    'condition '
                                                                                                                                    'will '
                                                                                                                                    'need '
                                                                                                                                    'to '
                                                                                                                                    'be '
                                                                                                                                    'validated '
                                                                                                                                    'by '
                                                                                                                                    'SHACL '
                                                                                                                                    'rule',
                                                                                                                     'properties': {'@id': {'type': 'string'}},
                                                                                                                     'type': 'object'}},
                                                                 'required': ['cdi:isDefinedBy_InstanceVariable',
                                                                              'di:has'],
                                                                 'type': 'object'},
                                                       'type': 'array'},
                    'cdi:headerRowCount': {'type': 'integer'},
                    'cdi:isDelimited': {'default': False,
                                        'type': 'boolean'},
                    'cdi:isFixedWidth': {'default': True,
                                         'type': 'boolean'},
                    'cdi:skipInitialSpace': {'default': True,
                                             'type': 'boolean'}},
     'required': ['@type',
                  'cdi:has_DataStructureComponent',
                  'cdi:hasHeader',
                  'cdi:headerRowCount'],
     'title': 'definitions for roles used in XAS profile',
     'type': 'object',
     'x-jsonld-extra-terms': {'schema': 'https://schema.org'}}

On instance:
    {'@context': {'cdi': 'http://ddialliance.org/Specification/DDI-CDI/1.0/RDF/',
                  'ex': 'https://example.org/',
                  'schema': 'http://schema.org/',
                  'xas': 'https://xas.org/dictionary/',
                  'xsd': 'http://www.w3.org/2001/XMLSchema#'},
     '@id': 'ex:xasXDIdownload_23463h',
     '@type': ['schema:DataDownload', 'cdi:TabularTextDataset'],
     'allowsDuplicates': False,
     'arrayBase': 1,
     'cdi:allowsDuplicates': False,
     'cdi:has_TextMapping': [{'@type': 'cdi:TextMapping',
                              'cdi:formats': {'@id': 'xas:monochromatorEnergyVariable'},
                              'cdi:hasRole': 'Dimension',
                              'cdi:index': 1,
                              'cdi:label': 'energy',
                              'cdi:length': 12},
                             {'@type': 'cdi:TextMapping',
                              'cdi:formats': {'@id': 'xas:incidentIntensityVariable'},
                              'cdi:hasRole': 'Measure',
                              'cdi:label': 'i0',
                              'index': 3,
                              'length': 13},
                             {'@type': 'cdi:TextMapping',
                              'cdi:formats': {'@id': 'xas:transmittedIntensityVariable'},
                              'cdi:hasRole': 'Measure',
                              'cdi:index': 2,
                              'cdi:label': 'it',
                              'cdi:length': 12}],
     'commentPrefix': '#',
     'dcterms:conformsTo': ['https://github.com/XraySpectroscopy/XAS-Data-Interchange/blob/master/specification/spec.md'],
     'hasHeader': True,
     'headerRowCount': 27,
     'isDelimited': False,
     'isFixedWidth': True,
     'schema:contentSize': '30 kb',
     'schema:contentUrl': 'https://github.com/XraySpectroscopy/XASDataLibrary/blob/master/data/Se/Se_Na2SeO4_rt_01.xdi',
     'schema:description': 'Distribution = PhysicalDataSet text file '
                           'conformant with XDI specification',
     'schema:encodingFormat': ['text/plain'],
     'skipInitialSpace': True}
=== End JSON Schema ===

=== SHACL ===

** Validation error **
Error processing _sources/xasProperties/xasXdiTabularTextDataset/rules.shacl: at line 8 of <>:
Bad syntax (expected '.' or '}' or ']' at end of statement) at ^ in:
"...b'    <http://ddialliance.org/Specification/DDI-CDI/1.0/RDF/>\n'^b'@base <https://www.ogc.org/rules/template/> .\n\n#  this is ju'..."
=== End SHACL ===

