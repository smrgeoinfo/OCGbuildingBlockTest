{
  "x-defs": {
    "cdifMandatorySchema": {
      "type": "object",
      "title": "Optional properties for CDIF Discovery metadata schema, with schema: prefixes",
      "description": "Building block specifies properties for minimal CDIF schama.org discovery record",
      "properties": {
        "@id": {
          "type": "string",
          "description": "The URI for the resource should be the @id value for the root of the JSON instance document tree. Note that this identifier can be interpreted to identify the resource that is the subject of this metadata record, or the JSON-LD object that is the digital object containing the metadata information."
        },
        "@type": {
          "description": "a schema.org Class that specifies the expected information content for the metadata record. For CDIF, 'schema:Dataset' is required, but other possible values (e.g. CreativeWork, SoftwareApplication, Product, WebAPI) are sometimes included to enable the schema.org properties used to describe the resource without schema.org validation errors.",
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "schema:CreativeWork",
              "schema:SoftwareApplication",
              "schema:SoftwareSourceCode",
              "schema:Product",
              "schema:WebAPI",
              "schema:Dataset",
              "schema:DigitalDocument",
              "schema:Collection",
              "schema:ImageObject",
              "schema:DataCatalog",
              "schema:DefinedTermSet"
            ],
            "default": "schema:Dataset"
          },
          "minItems": 1,
          "contains": {
            "enum": [
              "schema:Dataset"
            ]
          }
        },
        "schema:name": {
          "type": "string",
          "description": "A descriptive name of a dataset (e.g., 'Snow depth in Northern Hemisphere'). The name should uniquely identify the described resource for human use, in the scope of the metadata catalog containing this metadata record."
        },
        "schema:identifier": {
          "description": "The primary identifier for the dataset; other identifiers should be listed in the sameAs field. Schema.org has three ways of encoding identifiers-- a text description, a URL, or by using the schema:PropertyValue field. The Science on Schema.org guidance strongly recommends using the PropertyValue approach. see https://github.com/ESIPFed/science-on-schema.org   .... Dataset.md#identifier.  Ideally, for any given data provided they would provide identifiers either all as strings or all as identifier_type.",
          "anyOf": [
            {
              "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/cdifMandatorySchema/$defs/Identifier"
            },
            {
              "type": "string"
            }
          ]
        },
        "schema:dateModified": {
          "type": "string",
          "description": "ISO8601 formatted date (and optional time if relevant) when Dataset was last updated"
        },
        "schema:conditionsOfAccess": {
          "description": "text statement of conditions for use and access; if an online resource documents the restrictions or a URI is used to identify the conditions, recommend using schema:CreativeWork to provide a label (name) and an identifier (URI or URL). ",
          "type": "array",
          "minItems": 0,
          "items": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "object",
                "properties": {
                  "@id": {
                    "type": "string",
                    "description": "a reference to a resource defining conditions of Access"
                  }
                }
              },
              {
                "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/cdifMandatorySchema/$defs/LabeledLink"
              }
            ]
          }
        },
        "schema:license": {
          "description": "legal statement of conditions for use and access; recommend using schema:CreativeWork to provide a label (name) for the license, and an identifier. Sources of license identifiers: https://opensource.org/licenses/, https://creativecommons.org/about/cclicenses/, https://spdx.org/licenses/, http://cor.esipfed.org/ont/earthcube/swl. If only a string is provided, it should be an identifier for the license, ideally a resolvable URI",
          "type": "array",
          "minItems": 0,
          "items": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "object",
                "properties": {
                  "@id": {
                    "type": "string",
                    "description": "a reference to a license defintion"
                  }
                }
              },
              {
                "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/cdifMandatorySchema/$defs/LabeledLink"
              }
            ]
          }
        },
        "schema:url": {
          "type": "string",
          "format": "uri",
          "description": "Web Location of a page describing the dataset (landing page), typically providing links or instructions to get the actual resource content; analogous to dcat:accessURL. If a direct link is available to get the data, put in distribution/contentUrl"
        },
        "schema:distribution": {
          "description": "specifies how to download the data in a specific format or access via a web API. This property describes where to get the data and in what format by using the schema:DataDownload type. If user must access data through a landing page, provide link to landing page in the 'url' property for the dataset",
          "type": "array",
          "items": {
            "anyOf": [
              {
                "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/cdifMandatorySchema/$defs/DataDownload"
              },
              {
                "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/cdifMandatorySchema/$defs/WebAPI"
              }
            ]
          }
        },
        "schema:subjectOf": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/cdifMandatorySchema/$defs/MetaMetadata"
        }
      },
      "allOf": [
        {
          "required": [
            "@id",
            "@type",
            "@context",
            "schema:name",
            "schema:identifier",
            "schema:dateModified",
            "schema:subjectOf"
          ]
        },
        {
          "anyOf": [
            {
              "required": [
                "schema:license"
              ]
            },
            {
              "required": [
                "schema:conditionsOfAccess"
              ]
            }
          ]
        },
        {
          "anyOf": [
            {
              "required": [
                "schema:url"
              ]
            },
            {
              "required": [
                "schema:distribution"
              ]
            }
          ]
        }
      ],
      "$defs": {
        "LabeledLink": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/labeledLinkSchema"
        },
        "Identifier": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/identifierSchema"
        },
        "DefinedTerm": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/definedTermSchema"
        },
        "DataDownload": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/dataDownloadSchema"
        },
        "WebAPI": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/webAPISchema"
        },
        "MetaMetadata": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/metaMetadataSchema"
        }
      },
      "x-schema-source": "https://usgin.github.io/metadataBuildingBlocks/_sources/schemaorgProperties/cdifMandatory/cdifMandatorySchema.json",
      "x-schema-version": "https://json-schema.org/draft/2020-12/schema"
    },
    "definedTermSchema": {
      "description": "schema.org Defined Term schema",
      "type": "object",
      "properties": {
        "@type": {
          "enum": [
            "schema:DefinedTerm"
          ]
        },
        "schema:name": {
          "type": "string",
          "description": "text label for the term that is useful to human user"
        },
        "schema:identifier": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/identifierSchema"
            }
          ]
        },
        "schema:inDefinedTermSet": {
          "type": "string",
          "description": "Identifier for the controlled vocabulary responsible for this keyword."
        },
        "schema:termCode": {
          "type": "string",
          "description": "A representative code for this keyword in the controlled vocabulary (Optional).  Analogous to skos:Notation"
        }
      },
      "allOf": [
        {
          "required": [
            "@type"
          ]
        },
        {
          "anyOf": [
            {
              "required": [
                "schema:name"
              ]
            },
            {
              "required": [
                "schema:identifier"
              ]
            }
          ]
        }
      ],
      "x-schema-source": "https://usgin.github.io/metadataBuildingBlocks/_sources/schemaorgProperties/definedTerm/definedTermSchema.json",
      "x-schema-version": "https://json-schema.org/draft/2020-12/schema"
    },
    "additionalPropertySchema": {
      "type": "object",
      "title": "additionalProperty PropertyValue",
      "description": "PropertyValue values required to define a soft-typed property with a value. ",
      "properties": {
        "@type": {
          "type": "string",
          "enum": [
            "schema:PropertyValue"
          ]
        },
        "schema:propertyID": {
          "type": "array",
          "items": {
            "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/additionalPropertySchema/$defs/propertyID_item"
          },
          "minItems": 1,
          "description": "identifier or name for the property concept quantified by the values in this variable slot. Multiple values can specify the property at different levels of granularity."
        },
        "schema:name": {
          "type": "string"
        },
        "schema:value": {
          "type": "string"
        }
      },
      "required": [
        "schema:name",
        "schema:value"
      ],
      "$defs": {
        "DefinedTerm": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/definedTermSchema"
        },
        "propertyID_item": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "object",
              "properties": {
                "@id": {
                  "type": "string"
                }
              }
            },
            {
              "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/additionalPropertySchema/$defs/DefinedTerm"
            }
          ]
        }
      },
      "x-schema-source": "https://usgin.github.io/metadataBuildingBlocks/_sources/schemaorgProperties/additionalProperty/additionalPropertySchema.json",
      "x-schema-version": "https://json-schema.org/draft/2020-12/schema"
    },
    "dataDownloadSchema": {
      "description": "schema to document file-based access to a resoruce via URL, based on schema.org/DataDownload",
      "type": "object",
      "properties": {
        "@id": {
          "type": "string"
        },
        "@type": {
          "type": "array",
          "description": "implement as array because extensions might need to add additional types",
          "items": {
            "type": "string"
          },
          "contains": {
            "enum": [
              "schema:DataDownload"
            ]
          },
          "minItems": 1
        },
        "schema:name": {
          "type": "string"
        },
        "schema:contentUrl": {
          "type": "string",
          "format": "uri"
        },
        "schema:encodingFormat": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "spdx:checksum": {
          "type": "object",
          "description": "A string value calculated from the content of the resource representation, used to test if content has been modified. The checksum is a property of a particular distribution/DataDownload.",
          "properties": {
            "spdx:algorithm": {
              "type": "string"
            },
            "spdx:checksumValue": {
              "type": "string"
            }
          }
        },
        "schema:provider": {
          "type": "array",
          "description": "Party who maintains this particular distribution option for the dataset. Use this property if there are multiple distributions from different providers",
          "items": {
            "anyOf": [
              {
                "type": "object",
                "properties": {
                  "@id": {
                    "type": "string",
                    "description": "a identifier for an agent defined in this metadata, or externally; must be dereferenceable"
                  }
                }
              },
              {
                "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/dataDownloadSchema/$defs/Person"
              },
              {
                "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/dataDownloadSchema/$defs/Organization"
              }
            ]
          }
        }
      },
      "required": [
        "schema:contentUrl",
        "@type"
      ],
      "$defs": {
        "Person": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/personSchema"
        },
        "Organization": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/organizationSchema"
        }
      },
      "x-schema-source": "https://usgin.github.io/metadataBuildingBlocks/_sources/schemaorgProperties/dataDownload/dataDownloadSchema.json",
      "x-schema-version": "https://json-schema.org/draft/2020-12/schema"
    },
    "xasSampleSchema": {
      "title": "definitions for roles used in XAS profile",
      "type": "object",
      "properties": {
        "@type": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 2,
          "uniqueItems": true,
          "allOf": [
            {
              "contains": {
                "enum": [
                  "schema:Product"
                ]
              },
              "minContains": 1
            },
            {
              "contains": {
                "enum": [
                  "schema:Thing"
                ]
              },
              "minContains": 1
            }
          ]
        },
        "schema:additionalType": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 2,
          "uniqueItems": true,
          "allOf": [
            {
              "contains": {
                "enum": [
                  "MaterialSample"
                ]
              },
              "minContains": 1
            },
            {
              "contains": {
                "enum": [
                  "https://w3id.org/isample/vocabulary/materialsampleobjecttype/materialsample"
                ]
              },
              "minContains": 1
            }
          ]
        },
        "schema:name": {
          "type": "string"
        },
        "schema:identifier": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/xasSampleSchema/$defs/Identifier"
            }
          ]
        },
        "schema:description": {
          "type": "string"
        },
        "schema:additionalProperty": {
          "type": "array",
          "description": "extend base definition (AdditionalProperty) with some expected propertyID values from NEXUS and XDI specs added in the enum",
          "items": {
            "allOf": [
              {
                "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/xasSampleSchema/$defs/AdditionalProperty"
              },
              {
                "properties": {
                  "schema:propertyID": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                      "anyOf": [
                        {
                          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/additionalPropertySchema/$defs/propertyID_item"
                        },
                        {
                          "enum": [
                            "xas:stoichiometry",
                            "xas:samplePreparation",
                            "nxs:Field/NXsample/mass",
                            "nxs:Field/NXsample/point_group",
                            "nxs:Field/NXsample/unit_cell",
                            "xas:parentSample",
                            "xas:materialState"
                          ]
                        }
                      ]
                    }
                  }
                }
              }
            ]
          }
        }
      },
      "required": [
        "@type",
        "schema:additionalType",
        "schema:name"
      ],
      "$defs": {
        "Identifier": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/identifierSchema"
        },
        "AdditionalProperty": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/additionalPropertySchema"
        }
      },
      "x-schema-source": "https://usgin.github.io/metadataBuildingBlocks/_sources/xasProperties/xasSample/xasSampleSchema.json",
      "x-schema-version": "https://json-schema.org/draft/2020-12/schema"
    },
    "xasSubjectSchema": {
      "type": "object",
      "allOf": [
        {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/metaMetadataSchema"
        },
        {
          "properties": {
            "dcterms:conformsTo": {
              "type": "array",
              "items": {
                "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/metaMetadataSchema/$defs/conformsTo_item"
              },
              "minItems": 2,
              "contains": {
                "type": "object",
                "properties": {
                  "@id": {
                    "enum": [
                      "cdif:profile_xasCDIF"
                    ]
                  }
                },
                "required": [
                  "@id"
                ]
              },
              "minContains": 1
            }
          }
        }
      ],
      "x-schema-source": "https://usgin.github.io/metadataBuildingBlocks/_sources/xasProperties/xasSubject/xasSubjectSchema.json",
      "x-schema-version": "https://json-schema.org/draft/2020-12/schema"
    },
    "labeledLinkSchema": {
      "description": "schema for a labeled link, a profile of schema.org/CreativeWork",
      "type": "object",
      "properties": {
        "@type": {
          "type": "string",
          "default": "schema:CreativeWork",
          "enum": [
            "schema:CreativeWork"
          ]
        },
        "schema:name": {
          "type": "string"
        },
        "schema:description": {
          "type": "string"
        },
        "schema:url": {
          "type": "string",
          "format": "uri"
        }
      },
      "required": [
        "@type",
        "schema:url"
      ],
      "x-schema-source": "https://usgin.github.io/metadataBuildingBlocks/_sources/schemaorgProperties/labeledLink/labeledLinkSchema.json",
      "x-schema-version": "https://json-schema.org/draft/2020-12/schema"
    },
    "identifierSchema": {
      "description": "Properties for a schema.org identifier",
      "type": "object",
      "properties": {
        "@type": {
          "type": "string",
          "enum": [
            "schema:PropertyValue"
          ]
        },
        "schema:propertyID": {
          "type": "string",
          "description": "In this context for the schema:PropertyValue, this field is an identifier for the identifier schema, e.g. DOI, ARK.  Get values from https://registry.identifiers.org/registry/ for interoperability"
        },
        "schema:value": {
          "type": "string",
          "description": "the identifier string. E.g. 10.5066/F7VX0DMQ"
        },
        "schema:url": {
          "format": "uri",
          "type": "string",
          "description": "web-resolveable string for the identifier; host name part is location of a resolver that will return some representation for the given identifier value. E.g. https://doi.org/10.5066/F7VX0DMQ "
        }
      },
      "allOf": [
        {
          "required": [
            "@type"
          ]
        },
        {
          "anyOf": [
            {
              "required": [
                "schema:value"
              ]
            },
            {
              "required": [
                "schema:url"
              ]
            }
          ]
        }
      ],
      "x-schema-source": "https://usgin.github.io/metadataBuildingBlocks/_sources/schemaorgProperties/identifier/identifierSchema.json",
      "x-schema-version": "https://json-schema.org/draft/2020-12/schema"
    },
    "webAPISchema": {
      "title": "Direct data access to a resource via web servcie",
      "description": "use schema.org Action to document url or url template and parameters to request data through a web accessible location. At this point, schema is set up for one action-- an HTTP Get that requests data. The url template parameters (in curly brackets '{}') specify query paramters to filter the source data, request particular output formats or other aspects of data.",
      "type": "object",
      "properties": {
        "@type": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "contains": {
            "enum": [
              "schema:WebAPI"
            ]
          },
          "minItems": 1
        },
        "schema:serviceType": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/webAPISchema/$defs/DefinedTerm"
            }
          ],
          "description": "specify the kind of service. Ideally this should be a resolvable identifier. Currently there is no widely adopted registry for serviceType identifiers, in large part because services might be defined at different levels of granularity, and classifications might focus on function, data formats, thematic content, security, or other aspects of the service definition. For interoperability, there must be an external arrangement between data providers and consumers on the strings that will be used to specify service types."
        },
        "schema:termsOfService": {
          "description": "Description of access privileges required to use the API, e.g. registration, licensing, payments. Note that access constraints applying to all distributions of the resource should be specified in the access constraints for the resource description as a whole.",
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/webAPISchema/$defs/LabeledLink"
            }
          ]
        },
        "schema:documentation": {
          "description": "a document that provides a machine-actionable description of a service instance. Examples include OpenAPI documents, OGC Capabilities documents. Software designed to utilise a particular service type will typically include functionality to parse such a description document and engage with the service endpoint. If such a document is available for the service instance providing the resource distribution, it should be included in the distribution metadata.",
          "oneOf": [
            {
              "type": "string"
            },
            {
              "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/webAPISchema/$defs/LabeledLink"
            }
          ]
        },
        "schema:potentialAction": {
          "type": "array",
          "description": "actions that can be invoked via the API",
          "items": {
            "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/webAPISchema/$defs/Action"
          }
        }
      },
      "required": [
        "schema:serviceType",
        "schema:potentialAction"
      ],
      "$defs": {
        "LabeledLink": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/labeledLinkSchema"
        },
        "DefinedTerm": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/definedTermSchema"
        },
        "Action": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/actionSchema"
        }
      },
      "x-schema-source": "https://usgin.github.io/metadataBuildingBlocks/_sources/schemaorgProperties/webAPI/webAPISchema.json",
      "x-schema-version": "https://json-schema.org/draft/2020-12/schema"
    },
    "metaMetadataSchema": {
      "type": "object",
      "description": "see https://github.com/Cross-Domain-Interoperability-Framework/Discovery/issues/13 for discussion on how to make assertion about the sample registration and metadata distinct from statements about the physical object",
      "properties": {
        "@type": {
          "type": "string",
          "enum": [
            "schema:Dataset"
          ]
        },
        "@id": {
          "type": "string",
          "description": "identifier for the metadata record"
        },
        "schema:about": {
          "type": "object",
          "properties": {
            "@id": {
              "type": "string",
              "description": "this must be the @id value of the node containing the resource description metadata"
            }
          }
        },
        "dcterms:conformsTo": {
          "type": "array",
          "items": {
            "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/metaMetadataSchema/$defs/conformsTo_item"
          },
          "minItems": 1,
          "description": "uri for specifications that this metadata record conforms to. Minimimally should specify uri for CDIF discovery profile.  Implement as $def to facilitate extension for profiles that need to add conformance statements"
        },
        "schema:maintainer": {
          "description": "iSamples Registrant. identification of the agent that registered the sample, with contact information. Should include person name and affiliation, or position name and affiliation, or just organization name. e-mail address is preferred contact information.",
          "anyOf": [
            {
              "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/metaMetadataSchema/$defs/Person"
            },
            {
              "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/metaMetadataSchema/$defs/Organization"
            }
          ]
        },
        "schema:sdDatePublished": {
          "description": "date of most recent update to the metadata content, extends iSamples schema",
          "type": "string",
          "format": "date-time"
        },
        "schema:includedInDataCatalog": {
          "type": "object",
          "description": "identify the data collection or repository that contains the described dataset. The value is expected to be a schema:DataCatalog",
          "properties": {
            "@id": {
              "type": "string",
              "description": "identifier for the containing catalog or repository; example data at https://github.com/ESIPFed/science-on-schema.org/blob/develop/guides/Dataset.md#catalog puts identifier here"
            },
            "@type": {
              "type": "string",
              "default": "schema:DataCatalog",
              "enum": [
                "schema:DataCatalog"
              ]
            },
            "schema:name": {
              "type": "string"
            },
            "schema:url": {
              "type": "string",
              "format": "uri",
              "description": "locator to access a landing page for the collection or catalog"
            },
            "schema:identifier": {
              "description": "identifier for the collection or catalog; use identifier_type to provide information on identifier scheme and context for identifier",
              "allOf": [
                {
                  "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/metaMetadataSchema/$defs/Identifier"
                }
              ]
            }
          }
        }
      },
      "required": [
        "schema:about",
        "dcterms:conformsTo",
        "@type",
        "@id"
      ],
      "$defs": {
        "Identifier": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/identifierSchema"
        },
        "Person": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/personSchema"
        },
        "Organization": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/organizationSchema"
        },
        "conformsTo_item": {
          "type": "object",
          "properties": {
            "@id": {
              "type": "string",
              "description": "uri for specifications that this metadata record conforms to. Minimimally should specify uri for CDIF discovery profile"
            }
          }
        }
      },
      "x-schema-source": "https://usgin.github.io/metadataBuildingBlocks/_sources/schemaorgProperties/metaMetadata/metaMetadataSchema.json",
      "x-schema-version": "https://json-schema.org/draft/2020-12/schema"
    },
    "personSchema": {
      "description": "schema for cdif profile of schema.org/Person",
      "type": "object",
      "properties": {
        "@id": {
          "type": "string"
        },
        "@type": {
          "type": "string",
          "enum": [
            "schema:Person"
          ]
        },
        "schema:name": {
          "type": "string",
          "description": "string label for person that is meaningful for human users"
        },
        "schema:alternateName": {
          "type": "string",
          "description": "other labels by which the person might be known"
        },
        "schema:affiliation": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/personSchema/$defs/Organization"
        },
        "schema:contactPoint": {
          "description": "restrict to email only. Schema.org allows telephone and postal contacts as well",
          "type": "object",
          "properties": {
            "@type": {
              "type": "string",
              "default": "schema:ContactPoint",
              "enum": [
                "schema:ContactPoint"
              ]
            },
            "schema:email": {
              "type": "string"
            }
          }
        },
        "schema:description": {
          "type": "string"
        },
        "schema:identifier": {
          "description": "identifier for person, recommend ORCID",
          "anyOf": [
            {
              "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/personSchema/$defs/Identifier"
            },
            {
              "type": "string"
            }
          ]
        },
        "schema:sameAs": {
          "type": "array",
          "description": "other identifiers for the person",
          "items": {
            "type": "string"
          }
        }
      },
      "$defs": {
        "Organization": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/organizationSchema"
        },
        "Identifier": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/identifierSchema"
        }
      },
      "allOf": [
        {
          "required": [
            "@type"
          ]
        },
        {
          "anyOf": [
            {
              "required": [
                "schema:name"
              ]
            },
            {
              "required": [
                "schema:identifier"
              ]
            }
          ]
        }
      ],
      "x-schema-source": "https://usgin.github.io/metadataBuildingBlocks/_sources/schemaorgProperties/person/personSchema.json",
      "x-schema-version": "https://json-schema.org/draft/2020-12/schema"
    },
    "organizationSchema": {
      "type": "object",
      "properties": {
        "@id": {
          "type": "string"
        },
        "@type": {
          "type": "string",
          "default": "schema:Organization",
          "enum": [
            "schema:Organization"
          ]
        },
        "schema:additionalType": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "schema:FundingAgency",
                  "schema:Consortium",
                  "schema:Corporation",
                  "schema:EducationalOrganization",
                  "schema:FundingScheme",
                  "schema:GovernmentOrganization",
                  "schema:NGO",
                  "schema:Project",
                  "schema:ResearchOrganization"
                ]
              },
              {
                "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/organizationSchema/$defs/DefinedTerm"
              },
              {
                "type": "string"
              }
            ]
          }
        },
        "schema:name": {
          "type": "string",
          "description": "string label for organization that is meaningful for human users"
        },
        "schema:alternateName": {
          "type": "string",
          "description": "other labels by which the organization might be known"
        },
        "schema:description": {
          "type": "string"
        },
        "schema:identifier": {
          "description": "identifier for organization",
          "anyOf": [
            {
              "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/organizationSchema/$defs/Identifier"
            },
            {
              "type": "string"
            }
          ]
        },
        "schema:sameAs": {
          "type": "array",
          "description": "other identifiers for the organization",
          "items": {
            "type": "string"
          }
        }
      },
      "allOf": [
        {
          "required": [
            "@type"
          ]
        },
        {
          "anyOf": [
            {
              "required": [
                "schema:name"
              ]
            },
            {
              "required": [
                "schema:identifier"
              ]
            }
          ]
        }
      ],
      "$defs": {
        "DefinedTerm": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/definedTermSchema"
        },
        "Identifier": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/identifierSchema"
        }
      },
      "x-schema-source": "https://usgin.github.io/metadataBuildingBlocks/_sources/schemaorgProperties/organization/organizationSchema.json",
      "x-schema-version": "https://json-schema.org/draft/2020-12/schema"
    },
    "actionSchema": {
      "title": "Action ",
      "type": "object",
      "description": "this element defines an action (operation) that can be invoked via messages using the protocol defined. In most cases this will be an http request via TCP/IP, but in desktop or LAN environments, other protocols might be used. The target property defines the endpoint and syntax for invoking the action. Result specifies the encoding format for the (possible) response(s) when the action is invoked. Object specifies the information model for the resource that is the object of the action. This approach is an adoptation of the Action Blog Post from schema.org (see https://schema.org/docs/actions.html, and https://github.com/schemaorg/suggestions-questions-brainstorming/issues/62) ",
      "properties": {
        "@type": {
          "type": "string",
          "description": "TBD, recognize other actions, e.g. SearchAction, UpdateAction..., others?",
          "default": "schema:Action",
          "enum": [
            "schema:Action"
          ]
        },
        "schema:name": {
          "type": "string",
          "description": "text label for the action"
        },
        "schema:target": {
          "description": "specifies the request target location and request syntax",
          "allOf": [
            {
              "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/actionSchema/$defs/target_type"
            }
          ]
        },
        "schema:result": {
          "description": "specifies the serialization scheme (encoding format, information model) for expected representation of the data",
          "allOf": [
            {
              "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/actionSchema/$defs/result_type"
            }
          ]
        },
        "schema:object": {
          "description": "specification of information model/schema for target resource. Only necessary if the request allow specifying the fields to include in the response",
          "allOf": [
            {
              "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/actionSchema/$defs/object_type"
            }
          ]
        },
        "schema:query-input": {
          "description": "set of explanations of the parameters in the URL template for the target.",
          "allOf": [
            {
              "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/actionSchema/$defs/query-input_type"
            }
          ]
        }
      },
      "required": [
        "schema:name",
        "schema:target"
      ],
      "$defs": {
        "target_type": {
          "type": "object",
          "description": "documentation of the URL end point and syntax to invoke the service. This schema doesn't handle post requests",
          "properties": {
            "@type": {
              "type": "string",
              "default": "schema:EntryPoint",
              "enum": [
                "schema:EntryPoint"
              ]
            },
            "schema:description": {
              "type": "string"
            },
            "schema:urlTemplate": {
              "type": "string",
              "description": "a templated URL; parameters are enclosed in curly braces ('{..}'); parameters are not required. If included, parameters MUST be documented in the query-input element. Template should be consitent with URI Template (https://datatracker.ietf.org/doc/html/rfc6570)",
              "examples": [
                "http://portal.chordsrt.com/api/v1/data.{encoding}; single parameter",
                "http://portal.chordsrt.com/api/v1/data.{encoding}?instruments={instruments}&start={start}&end={end} ; multiple parameters",
                "{endpoint}{encoding}; endpoint URL path is a parameter,should only appear in potential actions for API specification descriptions, which are generic-not specific to a particular endpoint."
              ]
            },
            "schema:httpMethod": {
              "title": "HTTP Method",
              "description": "only applicable if protocol is http or a protocol that tunnels on http",
              "type": "array",
              "items": {
                "type": "string",
                "default": "GET",
                "enum": [
                  "GET",
                  "PUT",
                  "POST",
                  "PATCH",
                  "DELETE",
                  "COPY",
                  "HEAD",
                  "OPTIONS",
                  "PROPFIND"
                ]
              }
            },
            "schema:contentType": {
              "type": "array",
              "description": "The supported content type(s) for an EntryPoint response. a MIME type (https://www.iana.org/assignments/media-types/media-types.xhtml) that specifies the content type for messages in resonses from the service endpoint. This is a schema.org property, and is redundant with encodingFormat in the result property for the Action.",
              "items": {
                "type": "string"
              }
            }
          },
          "required": [
            "schema:urlTemplate"
          ]
        },
        "result_type": {
          "type": "object",
          "description": "documentation of the serialization format for the API response, i.e. an implementation of the structure specified in the object type field",
          "properties": {
            "@type": {
              "type": "string",
              "default": "schema:DataDownload"
            },
            "schema:encodingFormat": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "schema:description": {
              "type": "string"
            }
          }
        },
        "query-input_type": {
          "type": "array",
          "description": "object that maps the parameters (in braces '{  }' in the url template to specifications for the kind of value expected. parameters must all be strings in the URL",
          "minItems": 0,
          "items": {
            "type": "object",
            "properties": {
              "@id": {
                "type": "string"
              },
              "@type": {
                "type": "string",
                "default": "schema:PropertyValueSpecification",
                "enum": [
                  "schema:PropertyValueSpecification"
                ]
              },
              "schema:valueName": {
                "type": "string"
              },
              "schema:description": {
                "type": "string"
              },
              "schema:valueRequired": {
                "type": "boolean",
                "default": true
              },
              "schema:valuePattern": {
                "type": "string"
              }
            },
            "required": [
              "schema:valueName",
              "schema:description"
            ]
          }
        },
        "object_type": {
          "type": "object",
          "description": "description of the data structure of the return object",
          "properties": {
            "@type": {
              "type": "string",
              "default": "schema:DataFeed",
              "enum": [
                "schema:DataFeed"
              ]
            },
            "schema:description": {
              "type": "string"
            },
            "schema:variableMeasured": {
              "type": "array",
              "items": {
                "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/actionSchema/$defs/VariableMeasured"
              }
            }
          }
        },
        "VariableMeasured": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/variableMeasuredSchema"
        }
      },
      "x-schema-source": "https://usgin.github.io/metadataBuildingBlocks/_sources/schemaorgProperties/action/actionSchema.json",
      "x-schema-version": "https://json-schema.org/draft/2020-12/schema"
    },
    "variableMeasuredSchema": {
      "description": "CDIF schema.org implemenation of PropertyValue to use as values for variableMeasured",
      "type": "object",
      "properties": {
        "@type": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "contains": {
            "enum": [
              "schema:PropertyValue"
            ]
          },
          "minItems": 1
        },
        "@id": {
          "type": "string"
        },
        "schema:name": {
          "type": "string",
          "description": "this is the string label that is expected to be associated with the variable in the dataset serialization"
        },
        "schema:description": {
          "type": "string",
          "default": "missing"
        },
        "schema:alternateName": {
          "type": "array",
          "items": {
            "type": "string",
            "description": "human intelligible name for variable that conveys semantics"
          }
        },
        "schema:propertyID": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "object",
                "properties": {
                  "@id": {
                    "type": "string",
                    "description": "reference to a skos concept for the property"
                  }
                }
              },
              {
                "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/variableMeasuredSchema/$defs/DefinedTerm"
              }
            ]
          },
          "description": "identifier or name for the property concept quantified by the values in this variable slot. Multiple values can specify the property at different levels of granularity."
        },
        "schema:measurementTechnique": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "object",
              "properties": {
                "@id": {
                  "type": "string",
                  "description": "reference to a skos concept for the property"
                }
              }
            },
            {
              "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/variableMeasuredSchema/$defs/DefinedTerm"
            }
          ],
          "description": "A text description of the measurement method used to determine values for this variable. If standard measurement protocols are defined and registered, these can be identified via http URI's."
        },
        "schema:unitText": {
          "type": "string",
          "description": "A string that identifies a unit of measurement that applies to all values for this variable."
        },
        "schema:unitCode": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "object",
              "properties": {
                "@id": {
                  "type": "string",
                  "description": "reference to a skos concept for the property"
                }
              }
            },
            {
              "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/variableMeasuredSchema/$defs/DefinedTerm"
            }
          ],
          "description": "Value is expected to be TEXT or URL. We recommend providing an HTTP URI that identifies a unit of measure from a vocabulary accessible on the web. The QUDT unit vocabulary provides and extensive set of registered units of measure that can be used to populate the schema:unitCode property to specify the units of measure used to report datavalues when that is appropriate."
        },
        "schema:minValue": {
          "type": "number",
          "description": " If the value for the variable is numeric, this is the minimum value that occurs in the dataset. Not useful for other value types."
        },
        "schema:maxValue": {
          "type": "number",
          "description": " If the value for the variable is numeric, this is the maximum value that occurs in the dataset. Not useful for other value types."
        },
        "schema:url": {
          "format": "uri",
          "type": "string",
          "description": "Any schema:Thing can have a URL property, but because the value is simply a url the relationship of the linked resource can not be expressed. Usage is optional. The recommendation is that schema:url should link to a web page that would be useful for a person to interpret the variable, but is not intended to be machine-actionable."
        }
      },
      "$defs": {
        "DefinedTerm": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/definedTermSchema"
        }
      },
      "allOf": [
        {
          "required": [
            "@type",
            "schema:name",
            "schema:description"
          ]
        }
      ],
      "x-schema-source": "https://usgin.github.io/metadataBuildingBlocks/_sources/schemaorgProperties/variableMeasured/variableMeasuredSchema.json",
      "x-schema-version": "https://json-schema.org/draft/2020-12/schema"
    }
  },
  "allOf": [
    {
      "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/$defs/CdifMandatory"
    },
    {
      "type": "object",
      "properties": {
        "@type": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "schema:Dataset",
              "schema:Product"
            ]
          }
        },
        "schema:subjectOf": {
          "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/$defs/XasSubject"
        },
        "prov:wasGeneratedBy": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "prov:used": {
                "type": "array",
                "description": "array of instrument or instrument system components. The x-ray source type and probe,  and monochromator properties type, d-spacing and reflection plane are required ",
                "items": {
                  "type": "object",
                  "properties": {
                    "@type": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "schema:additionalType": {
                      "type": "string"
                    },
                    "schema:additionalProperty": {
                      "type": "array",
                      "items": {
                        "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/$defs/AdditionalProperty"
                      }
                    }
                  }
                },
                "minItems": 2,
                "allOf": [
                  {
                    "contains": {
                      "type": "object",
                      "properties": {
                        "@type": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "minItems": 2,
                          "allOf": [
                            {
                              "contains": {
                                "enum": [
                                  "schema:Thing"
                                ]
                              }
                            },
                            {
                              "contains": {
                                "enum": [
                                  "schema:Product"
                                ]
                              }
                            }
                          ]
                        },
                        "schema:additionalType": {
                          "enum": [
                            "nxs:BaseClass/NXsource"
                          ]
                        },
                        "schema:additionalProperty": {
                          "type": "array",
                          "minItems": 2,
                          "items": {
                            "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/$defs/AdditionalProperty"
                          },
                          "allOf": [
                            {
                              "contains": {
                                "type": "object",
                                "properties": {
                                  "schema:propertyID": {
                                    "type": "array",
                                    "contains": {
                                      "enum": [
                                        "nxs:Field/NXsource/type"
                                      ]
                                    }
                                  },
                                  "schema:value": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "schema:propertyID",
                                  "schema:value"
                                ]
                              }
                            },
                            {
                              "contains": {
                                "type": "object",
                                "properties": {
                                  "schema:propertyID": {
                                    "type": "array",
                                    "contains": {
                                      "enum": [
                                        "nxs:Field/NXsource/probe"
                                      ]
                                    }
                                  },
                                  "schema:name": {
                                    "enum": [
                                      "Probe"
                                    ]
                                  },
                                  "schema:value": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "schema:name",
                                  "schema:propertyID",
                                  "schema:value"
                                ]
                              }
                            }
                          ]
                        }
                      },
                      "required": [
                        "@type",
                        "schema:additionalType",
                        "schema:additionalProperty"
                      ]
                    }
                  },
                  {
                    "contains": {
                      "type": "object",
                      "properties": {
                        "@type": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "minItems": 2,
                          "allOf": [
                            {
                              "contains": {
                                "enum": [
                                  "schema:Thing"
                                ]
                              }
                            },
                            {
                              "contains": {
                                "enum": [
                                  "schema:Product"
                                ]
                              }
                            }
                          ]
                        },
                        "schema:additionalType": {
                          "enum": [
                            "nxs:BaseClass/NXmonochromator"
                          ]
                        },
                        "schema:name": {
                          "type": "string"
                        },
                        "schema:additionalProperty": {
                          "description": "Require additional properties for monochromator, requires d-space, crystal type, reflection plane.",
                          "type": "array",
                          "minItems": 3,
                          "items": {
                            "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/$defs/AdditionalProperty"
                          },
                          "contains": {
                            "type": "object",
                            "properties": {
                              "schema:propertyID": {
                                "type": "array",
                                "contains": {
                                  "enum": [
                                    "nxs:Field/NXcrystal/type"
                                  ]
                                }
                              },
                              "schema:value": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "schema:value",
                              "schema:propertyID"
                            ]
                          },
                          "allOf": [
                            {
                              "contains": {
                                "type": "object",
                                "properties": {
                                  "schema:propertyID": {
                                    "type": "array",
                                    "contains": {
                                      "enum": [
                                        "nxs:Field/NXcrystal/d_spacing"
                                      ]
                                    }
                                  },
                                  "schema:value": {
                                    "type": "string"
                                  },
                                  "schema:unitText": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "schema:propertyID",
                                  "schema:value",
                                  "schema:unitText"
                                ]
                              }
                            },
                            {
                              "contains": {
                                "type": "object",
                                "properties": {
                                  "schema:propertyID": {
                                    "type": "array",
                                    "contains": {
                                      "enum": [
                                        "nxs:Field/NXcrystal/reflection"
                                      ]
                                    }
                                  },
                                  "schema:value": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "schema:value",
                                  "schema:propertyID"
                                ]
                              }
                            }
                          ]
                        }
                      },
                      "required": [
                        "@type",
                        "schema:additionalType",
                        "schema:additionalProperty"
                      ]
                    }
                  }
                ]
              },
              "schema:mainEntity": {
                "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/$defs/XasSample"
              }
            }
          }
        },
        "schema:distribution": {
          "type": "array",
          "items": {
            "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/$defs/DataDownload"
          },
          "contains": {
            "type": "object",
            "properties": {
              "@type": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "minItems": 2,
                "allOf": [
                  {
                    "contains": {
                      "enum": [
                        "schema:DataDownload"
                      ]
                    }
                  },
                  {
                    "contains": {
                      "enum": [
                        "cdi:PhysicalDataset"
                      ]
                    }
                  }
                ]
              },
              "dcterms:conformsTo": {
                "enum": [
                  "https://github.com/XraySpectroscopy/XAS-Data-Interchange/blob/master/specification/spec.md"
                ]
              }
            },
            "required": [
              "@type",
              "dcterms:conformsTo"
            ]
          }
        },
        "schema:measurementTechnique": {
          "type": "array",
          "description": "Require DefinedTerms for both: absorption edge (XDI dict) and target element (SWEET).",
          "minItems": 2,
          "items": {
            "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/$defs/DefinedTerm"
          },
          "contains": {
            "type": "object",
            "properties": {
              "schema:name": {
                "enum": [
                  "X-Ray Absorption Spectroscopy"
                ]
              },
              "schema:termCode": {
                "enum": [
                  "XAS"
                ]
              },
              "schema:identifier": {
                "enum": [
                  "http://purl.org/pan-science/PaNET/PaNET01196"
                ]
              },
              "schema:inDefinedTermSet": {
                "enum": [
                  "http://purl.org/pan-science/PaNET/PaNET.owl"
                ]
              }
            },
            "required": [
              "schema:name",
              "schema:termCode",
              "schema:identifier",
              "schema:inDefinedTermSet"
            ]
          },
          "allOf": [
            {
              "contains": {
                "type": "object",
                "properties": {
                  "schema:name": {
                    "type": "string"
                  },
                  "schema:inDefinedTermSet": {
                    "enum": [
                      "nxs:Field/NXxas/ENTRY/DATA/mode"
                    ]
                  }
                },
                "required": [
                  "schema:name",
                  "schema:inDefinedTermSet"
                ]
              }
            }
          ]
        },
        "schema:keywords": {
          "type": "array",
          "description": "extends base CDIF keyword schema to require defined terms for the absorption edge and the target element for the analysis",
          "minItems": 2,
          "items": {
            "type": "object",
            "properties": {
              "@type": {
                "enum": [
                  "schema:DefinedTerm"
                ]
              },
              "schema:name": {
                "type": "string"
              },
              "schema:identifier": {
                "type": "string"
              },
              "schema:inDefinedTermSet": {
                "type": "string",
                "description": "need to include this to tag what the keyword is about; we're using the keywords as soft-typed properties"
              }
            },
            "required": [
              "@type",
              "schema:name",
              "schema:inDefinedTermSet"
            ],
            "additionalProperties": true
          },
          "contains": {
            "type": "object",
            "properties": {
              "schema:inDefinedTermSet": {
                "enum": [
                  "https://github.com/XraySpectroscopy/XAS-Data-Interchange/blob/master/specification/dictionary.md"
                ]
              }
            },
            "required": [
              "schema:inDefinedTermSet"
            ]
          },
          "allOf": [
            {
              "contains": {
                "type": "object",
                "properties": {
                  "schema:inDefinedTermSet": {
                    "enum": [
                      "http://sweetontology.net/matrElement"
                    ]
                  }
                },
                "required": [
                  "schema:inDefinedTermSet"
                ]
              }
            }
          ]
        }
      }
    }
  ],
  "$defs": {
    "CdifMandatory": {
      "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/cdifMandatorySchema"
    },
    "DefinedTerm": {
      "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/definedTermSchema"
    },
    "AdditionalProperty": {
      "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/additionalPropertySchema"
    },
    "DataDownload": {
      "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/dataDownloadSchema"
    },
    "XasSample": {
      "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/xasSampleSchema"
    },
    "XasSubject": {
      "$ref": "https://usgin.github.io/metadataBuildingBlocks/build/annotated/bbr/metadata/xasProperties/xasRequired/schema-oas3.0.json#/x-defs/xasSubjectSchema"
    }
  },
  "x-jsonld-extra-terms": {
    "schema": "https://schema.org"
  },
  "x-schema-version": "https://json-schema.org/draft/2020-12/schema"
}