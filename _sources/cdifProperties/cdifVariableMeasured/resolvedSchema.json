{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Extends cdif variableMeasured with properties for DDI-CDI InstanceVariable",
  "type": "object",
  "properties": {
    "@type": {
      "type": "array",
      "description": "require additional type besided schema:PropertyValue required by CDIF variableMeasured, so min items should add up to 2 (we'll see if this works....)",
      "items": {
        "type": "string",
        "enum": [
          "schema:PropertyValue",
          "cdi:InstanceVariable"
        ]
      },
      "minItems": 2
    },
    "cdi:identifier": {
      "type": "string"
    },
    "cdi:physicalDataType": {
      "type": "array",
      "items": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "object",
            "properties": {
              "@id": {
                "type": "string",
                "description": "reference to a skos concept for the data type"
              }
            }
          },
          {
            "description": "schema.org Defined Term schema",
            "type": "object",
            "properties": {
              "@type": {
                "const": "schema:DefinedTerm"
              },
              "schema:name": {
                "type": "string",
                "description": "text label for the term that is useful to human user"
              },
              "schema:identifier": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "description": "Properties for a schema.org identifier",
                    "type": "object",
                    "properties": {
                      "@type": {
                        "type": "string",
                        "const": "schema:PropertyValue"
                      },
                      "schema:propertyID": {
                        "type": "string",
                        "description": "In this context for the schema:PropertyValue, this field is an identifier for the identifier schema, e.g. DOI, ARK.  Get values from https://registry.identifiers.org/registry/ for interoperability"
                      },
                      "schema:value": {
                        "type": "string",
                        "description": "the identifier string. E.g. 10.5066/F7VX0DMQ"
                      },
                      "schema:url": {
                        "type": "string",
                        "format": "uri",
                        "description": "web-resolveable string for the identifier; host name part is location of a resolver that will return some representation for the given identifier value. E.g. https://doi.org/10.5066/F7VX0DMQ "
                      }
                    },
                    "allOf": [
                      {
                        "required": [
                          "@type"
                        ]
                      },
                      {
                        "anyOf": [
                          {
                            "required": [
                              "schema:value"
                            ]
                          },
                          {
                            "required": [
                              "schema:url"
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              "schema:inDefinedTermSet": {
                "type": "string",
                "description": "Identifier for the controlled vocabulary responsible for this keyword."
              },
              "schema:termCode": {
                "type": "string",
                "description": "A representative code for this keyword in the controlled vocabulary (Optional).  Analogous to skos:Notation"
              }
            },
            "allOf": [
              {
                "required": [
                  "@type"
                ]
              },
              {
                "anyOf": [
                  {
                    "required": [
                      "schema:name"
                    ]
                  },
                  {
                    "required": [
                      "schema:identifier"
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      "description": "identifier or name for the data type concept."
    },
    "cdi:intendedDataType": {
      "type": "string",
      "description": "The intended data type for values of this variable, from DDI-CDI RepresentedVariable.hasIntendedDataType. Recommended values are XML Schema datatypes (e.g. https://www.w3.org/TR/xmlschema-2/#decimal)."
    },
    "cdi:role": {
      "type": "string",
      "description": "Specifies the relation of the variable to the data structure, corresponding to DDI-CDI DataStructureComponent subtypes. Values should be one of {MeasureComponent, AttributeComponent, DimensionComponent, DescriptorComponent, ReferenceValueComponent}."
    },
    "cdi:describedUnitOfMeasure": {
      "description": "A structured unit of measure from a controlled vocabulary, from DDI-CDI RepresentedVariable.describedUnitOfMeasure.",
      "type": "object",
      "properties": {
        "@type": {
          "const": "schema:DefinedTerm"
        },
        "schema:name": {
          "type": "string",
          "description": "text label for the term that is useful to human user"
        },
        "schema:identifier": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "description": "Properties for a schema.org identifier",
              "type": "object",
              "properties": {
                "@type": {
                  "type": "string",
                  "const": "schema:PropertyValue"
                },
                "schema:propertyID": {
                  "type": "string",
                  "description": "In this context for the schema:PropertyValue, this field is an identifier for the identifier schema, e.g. DOI, ARK.  Get values from https://registry.identifiers.org/registry/ for interoperability"
                },
                "schema:value": {
                  "type": "string",
                  "description": "the identifier string. E.g. 10.5066/F7VX0DMQ"
                },
                "schema:url": {
                  "type": "string",
                  "format": "uri",
                  "description": "web-resolveable string for the identifier; host name part is location of a resolver that will return some representation for the given identifier value. E.g. https://doi.org/10.5066/F7VX0DMQ "
                }
              },
              "allOf": [
                {
                  "required": [
                    "@type"
                  ]
                },
                {
                  "anyOf": [
                    {
                      "required": [
                        "schema:value"
                      ]
                    },
                    {
                      "required": [
                        "schema:url"
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        "schema:inDefinedTermSet": {
          "type": "string",
          "description": "Identifier for the controlled vocabulary responsible for this keyword."
        },
        "schema:termCode": {
          "type": "string",
          "description": "A representative code for this keyword in the controlled vocabulary (Optional).  Analogous to skos:Notation"
        }
      },
      "allOf": [
        {
          "required": [
            "@type"
          ]
        },
        {
          "anyOf": [
            {
              "required": [
                "schema:name"
              ]
            },
            {
              "required": [
                "schema:identifier"
              ]
            }
          ]
        }
      ]
    },
    "cdi:simpleUnitOfMeasure": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "object",
          "properties": {
            "@id": {
              "type": "string",
              "description": "reference to a skos concept for the data type"
            }
          }
        },
        {
          "description": "schema.org Defined Term schema",
          "type": "object",
          "properties": {
            "@type": {
              "const": "schema:DefinedTerm"
            },
            "schema:name": {
              "type": "string",
              "description": "text label for the term that is useful to human user"
            },
            "schema:identifier": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "description": "Properties for a schema.org identifier",
                  "type": "object",
                  "properties": {
                    "@type": {
                      "type": "string",
                      "const": "schema:PropertyValue"
                    },
                    "schema:propertyID": {
                      "type": "string",
                      "description": "In this context for the schema:PropertyValue, this field is an identifier for the identifier schema, e.g. DOI, ARK.  Get values from https://registry.identifiers.org/registry/ for interoperability"
                    },
                    "schema:value": {
                      "type": "string",
                      "description": "the identifier string. E.g. 10.5066/F7VX0DMQ"
                    },
                    "schema:url": {
                      "type": "string",
                      "format": "uri",
                      "description": "web-resolveable string for the identifier; host name part is location of a resolver that will return some representation for the given identifier value. E.g. https://doi.org/10.5066/F7VX0DMQ "
                    }
                  },
                  "allOf": [
                    {
                      "required": [
                        "@type"
                      ]
                    },
                    {
                      "anyOf": [
                        {
                          "required": [
                            "schema:value"
                          ]
                        },
                        {
                          "required": [
                            "schema:url"
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            "schema:inDefinedTermSet": {
              "type": "string",
              "description": "Identifier for the controlled vocabulary responsible for this keyword."
            },
            "schema:termCode": {
              "type": "string",
              "description": "A representative code for this keyword in the controlled vocabulary (Optional).  Analogous to skos:Notation"
            }
          },
          "allOf": [
            {
              "required": [
                "@type"
              ]
            },
            {
              "anyOf": [
                {
                  "required": [
                    "schema:name"
                  ]
                },
                {
                  "required": [
                    "schema:identifier"
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    "cdi:uses": {
      "type": "array",
      "items": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "object",
            "properties": {
              "@id": {
                "type": "string",
                "description": "reference to a skos concept for the property"
              }
            }
          },
          {
            "description": "schema.org Defined Term schema",
            "type": "object",
            "properties": {
              "@type": {
                "const": "schema:DefinedTerm"
              },
              "schema:name": {
                "type": "string",
                "description": "text label for the term that is useful to human user"
              },
              "schema:identifier": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "description": "Properties for a schema.org identifier",
                    "type": "object",
                    "properties": {
                      "@type": {
                        "type": "string",
                        "const": "schema:PropertyValue"
                      },
                      "schema:propertyID": {
                        "type": "string",
                        "description": "In this context for the schema:PropertyValue, this field is an identifier for the identifier schema, e.g. DOI, ARK.  Get values from https://registry.identifiers.org/registry/ for interoperability"
                      },
                      "schema:value": {
                        "type": "string",
                        "description": "the identifier string. E.g. 10.5066/F7VX0DMQ"
                      },
                      "schema:url": {
                        "type": "string",
                        "format": "uri",
                        "description": "web-resolveable string for the identifier; host name part is location of a resolver that will return some representation for the given identifier value. E.g. https://doi.org/10.5066/F7VX0DMQ "
                      }
                    },
                    "allOf": [
                      {
                        "required": [
                          "@type"
                        ]
                      },
                      {
                        "anyOf": [
                          {
                            "required": [
                              "schema:value"
                            ]
                          },
                          {
                            "required": [
                              "schema:url"
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              "schema:inDefinedTermSet": {
                "type": "string",
                "description": "Identifier for the controlled vocabulary responsible for this keyword."
              },
              "schema:termCode": {
                "type": "string",
                "description": "A representative code for this keyword in the controlled vocabulary (Optional).  Analogous to skos:Notation"
              }
            },
            "allOf": [
              {
                "required": [
                  "@type"
                ]
              },
              {
                "anyOf": [
                  {
                    "required": [
                      "schema:name"
                    ]
                  },
                  {
                    "required": [
                      "schema:identifier"
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      "description": "Essentially the same as schema:propertyID. References to concepts that this variable measures or represents."
    },
    "cdi:name": {
      "type": "string",
      "description": "DDI-CDI Concept.name. The name of this variable in the DDI-CDI model."
    },
    "cdi:displayLabel": {
      "type": "string",
      "description": "DDI-CDI Concept.displayLabel. A human-readable label for display purposes."
    }
  },
  "allOf": [
    {
      "required": [
        "@type",
        "cdi:physicalDataType"
      ]
    },
    {
      "description": "CDIF schema.org implemenation of PropertyValue to use as values for variableMeasured",
      "type": "object",
      "properties": {
        "@type": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "contains": {
            "const": "schema:PropertyValue"
          },
          "minItems": 1
        },
        "@id": {
          "type": "string"
        },
        "schema:name": {
          "type": "string",
          "description": "this is the string label that is expected to be associated with the variable in the dataset serialization"
        },
        "schema:description": {
          "type": "string",
          "default": "missing"
        },
        "schema:alternateName": {
          "type": "array",
          "items": {
            "type": "string",
            "description": "human intelligible name for variable that conveys semantics"
          }
        },
        "schema:propertyID": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "object",
                "properties": {
                  "@id": {
                    "type": "string",
                    "description": "reference to a skos concept for the property"
                  }
                }
              },
              {
                "description": "schema.org Defined Term schema",
                "type": "object",
                "properties": {
                  "@type": {
                    "const": "schema:DefinedTerm"
                  },
                  "schema:name": {
                    "type": "string",
                    "description": "text label for the term that is useful to human user"
                  },
                  "schema:identifier": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "description": "Properties for a schema.org identifier",
                        "type": "object",
                        "properties": {
                          "@type": {
                            "type": "string",
                            "const": "schema:PropertyValue"
                          },
                          "schema:propertyID": {
                            "type": "string",
                            "description": "In this context for the schema:PropertyValue, this field is an identifier for the identifier schema, e.g. DOI, ARK.  Get values from https://registry.identifiers.org/registry/ for interoperability"
                          },
                          "schema:value": {
                            "type": "string",
                            "description": "the identifier string. E.g. 10.5066/F7VX0DMQ"
                          },
                          "schema:url": {
                            "type": "string",
                            "format": "uri",
                            "description": "web-resolveable string for the identifier; host name part is location of a resolver that will return some representation for the given identifier value. E.g. https://doi.org/10.5066/F7VX0DMQ "
                          }
                        },
                        "allOf": [
                          {
                            "required": [
                              "@type"
                            ]
                          },
                          {
                            "anyOf": [
                              {
                                "required": [
                                  "schema:value"
                                ]
                              },
                              {
                                "required": [
                                  "schema:url"
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  "schema:inDefinedTermSet": {
                    "type": "string",
                    "description": "Identifier for the controlled vocabulary responsible for this keyword."
                  },
                  "schema:termCode": {
                    "type": "string",
                    "description": "A representative code for this keyword in the controlled vocabulary (Optional).  Analogous to skos:Notation"
                  }
                },
                "allOf": [
                  {
                    "required": [
                      "@type"
                    ]
                  },
                  {
                    "anyOf": [
                      {
                        "required": [
                          "schema:name"
                        ]
                      },
                      {
                        "required": [
                          "schema:identifier"
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          "description": "identifier or name for the property concept quantified by the values in this variable slot. Multiple values can specify the property at different levels of granularity."
        },
        "schema:measurementTechnique": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "object",
              "properties": {
                "@id": {
                  "type": "string",
                  "description": "reference to a skos concept for the property"
                }
              }
            },
            {
              "description": "schema.org Defined Term schema",
              "type": "object",
              "properties": {
                "@type": {
                  "const": "schema:DefinedTerm"
                },
                "schema:name": {
                  "type": "string",
                  "description": "text label for the term that is useful to human user"
                },
                "schema:identifier": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "description": "Properties for a schema.org identifier",
                      "type": "object",
                      "properties": {
                        "@type": {
                          "type": "string",
                          "const": "schema:PropertyValue"
                        },
                        "schema:propertyID": {
                          "type": "string",
                          "description": "In this context for the schema:PropertyValue, this field is an identifier for the identifier schema, e.g. DOI, ARK.  Get values from https://registry.identifiers.org/registry/ for interoperability"
                        },
                        "schema:value": {
                          "type": "string",
                          "description": "the identifier string. E.g. 10.5066/F7VX0DMQ"
                        },
                        "schema:url": {
                          "type": "string",
                          "format": "uri",
                          "description": "web-resolveable string for the identifier; host name part is location of a resolver that will return some representation for the given identifier value. E.g. https://doi.org/10.5066/F7VX0DMQ "
                        }
                      },
                      "allOf": [
                        {
                          "required": [
                            "@type"
                          ]
                        },
                        {
                          "anyOf": [
                            {
                              "required": [
                                "schema:value"
                              ]
                            },
                            {
                              "required": [
                                "schema:url"
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                "schema:inDefinedTermSet": {
                  "type": "string",
                  "description": "Identifier for the controlled vocabulary responsible for this keyword."
                },
                "schema:termCode": {
                  "type": "string",
                  "description": "A representative code for this keyword in the controlled vocabulary (Optional).  Analogous to skos:Notation"
                }
              },
              "allOf": [
                {
                  "required": [
                    "@type"
                  ]
                },
                {
                  "anyOf": [
                    {
                      "required": [
                        "schema:name"
                      ]
                    },
                    {
                      "required": [
                        "schema:identifier"
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "description": "A text description of the measurement method used to determine values for this variable. If standard measurement protocols are defined and registered, these can be identified via http URI's."
        },
        "schema:unitText": {
          "type": "string",
          "description": "A string that identifies a unit of measurement that applies to all values for this variable."
        },
        "schema:unitCode": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "object",
              "properties": {
                "@id": {
                  "type": "string",
                  "description": "reference to a skos concept for the property"
                }
              }
            },
            {
              "description": "schema.org Defined Term schema",
              "type": "object",
              "properties": {
                "@type": {
                  "const": "schema:DefinedTerm"
                },
                "schema:name": {
                  "type": "string",
                  "description": "text label for the term that is useful to human user"
                },
                "schema:identifier": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "description": "Properties for a schema.org identifier",
                      "type": "object",
                      "properties": {
                        "@type": {
                          "type": "string",
                          "const": "schema:PropertyValue"
                        },
                        "schema:propertyID": {
                          "type": "string",
                          "description": "In this context for the schema:PropertyValue, this field is an identifier for the identifier schema, e.g. DOI, ARK.  Get values from https://registry.identifiers.org/registry/ for interoperability"
                        },
                        "schema:value": {
                          "type": "string",
                          "description": "the identifier string. E.g. 10.5066/F7VX0DMQ"
                        },
                        "schema:url": {
                          "type": "string",
                          "format": "uri",
                          "description": "web-resolveable string for the identifier; host name part is location of a resolver that will return some representation for the given identifier value. E.g. https://doi.org/10.5066/F7VX0DMQ "
                        }
                      },
                      "allOf": [
                        {
                          "required": [
                            "@type"
                          ]
                        },
                        {
                          "anyOf": [
                            {
                              "required": [
                                "schema:value"
                              ]
                            },
                            {
                              "required": [
                                "schema:url"
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                "schema:inDefinedTermSet": {
                  "type": "string",
                  "description": "Identifier for the controlled vocabulary responsible for this keyword."
                },
                "schema:termCode": {
                  "type": "string",
                  "description": "A representative code for this keyword in the controlled vocabulary (Optional).  Analogous to skos:Notation"
                }
              },
              "allOf": [
                {
                  "required": [
                    "@type"
                  ]
                },
                {
                  "anyOf": [
                    {
                      "required": [
                        "schema:name"
                      ]
                    },
                    {
                      "required": [
                        "schema:identifier"
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "description": "Value is expected to be TEXT or URL. We recommend providing an HTTP URI that identifies a unit of measure from a vocabulary accessible on the web. The QUDT unit vocabulary provides and extensive set of registered units of measure that can be used to populate the schema:unitCode property to specify the units of measure used to report datavalues when that is appropriate."
        },
        "schema:minValue": {
          "type": "number",
          "description": " If the value for the variable is numeric, this is the minimum value that occurs in the dataset. Not useful for other value types."
        },
        "schema:maxValue": {
          "type": "number",
          "description": " If the value for the variable is numeric, this is the maximum value that occurs in the dataset. Not useful for other value types."
        },
        "schema:url": {
          "type": "string",
          "format": "uri",
          "description": "Any schema:Thing can have a URL property, but because the value is simply a url the relationship of the linked resource can not be expressed. Usage is optional. The recommendation is that schema:url should link to a web page that would be useful for a person to interpret the variable, but is not intended to be machine-actionable."
        }
      },
      "allOf": [
        {
          "required": [
            "@type",
            "schema:name",
            "schema:description"
          ]
        }
      ]
    }
  ]
}
