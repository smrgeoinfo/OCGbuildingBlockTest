{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Direct data access to a resource via web servcie",
  "description": "use schema.org Action to document url or url template and parameters to request data through a web accessible location. At this point, schema is set up for one action-- an HTTP Get that requests data. The url template parameters (in curly brackets '{}') specify query paramters to filter the source data, request particular output formats or other aspects of data.",
  "type": "object",
  "properties": {
    "@type": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": [
          "schema:WebAPI"
        ]
      },
      "minItems": 1
    },
    "schema:serviceType": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "$ref": "#/$defs/DefinedTerm"
        }
      ],
      "description": "specify the kind of service. Ideally this should be a resolvable identifier. Currently there is no widely adopted registry for serviceType identifiers, in large part because services might be defined at different levels of granularity, and classifications might focus on function, data formats, thematic content, security, or other aspects of the service definition. For interoperability, there must be an external arrangement between data providers and consumers on the strings that will be used to specify service types."
    },
    "schema:termsOfService": {
      "description": "Description of access privileges required to use the API, e.g. registration, licensing, payments. Note that access constraints applying to all distributions of the resource should be specified in the access constraints for the resource description as a whole.",
      "oneOf": [
        {
          "type": "string"
        },
        {
          "$ref": "#/$defs/LabeledLink"
        }
      ]
    },
    "schema:documentation": {
      "description": "a document that provides a machine-actionable description of a service instance. Examples include OpenAPI documents, OGC Capabilities documents. Software designed to utilise a particular service type will typically include functionality to parse such a description document and engage with the service endpoint. If such a document is available for the service instance providing the resource distribution, it should be included in the distribution metadata.",
      "oneOf": [
        {
          "type": "string"
        },
        {
          "$ref": "#/$defs/LabeledLink"
        }
      ]
    },
    "schema:potentialAction": {
      "type": "array",
      "description": "actions that can be invoked via the API",
      "items": {
        "$schema": "https://json-schema.org/draft/2020-12/schema",
        "title": "Action ",
        "type": "object",
        "description": "this element defines an action (operation) that can be invoked via messages using the protocol defined. In most cases this will be an http request via TCP/IP, but in desktop or LAN environments, other protocols might be used. The target property defines the endpoint and syntax for invoking the action. Result specifies the encoding format for the (possible) response(s) when the action is invoked. Object specifies the information model for the resource that is the object of the action. This approach is an adoptation of the Action Blog Post from schema.org (see https://schema.org/docs/actions.html, and https://github.com/schemaorg/suggestions-questions-brainstorming/issues/62) ",
        "properties": {
          "@type": {
            "type": "string",
            "description": "TBD, recognize other actions, e.g. SearchAction, UpdateAction..., others?",
            "default": "schema:Action",
            "const": "schema:Action"
          },
          "schema:name": {
            "type": "string",
            "description": "text label for the action"
          },
          "schema:target": {
            "$ref": "#/$defs/target_type",
            "description": "specifies the request target location and request syntax"
          },
          "schema:result": {
            "$ref": "#/$defs/result_type",
            "description": "specifies the serialization scheme (encoding format, information model) for expected representation of the data"
          },
          "schema:object": {
            "$ref": "#/$defs/object_type",
            "description": "specification of information model/schema for target resource. Only necessary if the request allow specifying the fields to include in the response"
          },
          "schema:query-input": {
            "$ref": "#/$defs/query-input_type",
            "description": "set of explanations of the parameters in the URL template for the target."
          }
        },
        "required": [
          "schema:name",
          "schema:target"
        ]
      }
    }
  },
  "required": [
    "schema:serviceType",
    "schema:potentialAction"
  ],
  "$defs": {
    "LabeledLink": {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "description": "schema for a labeled link, a profile of schema.org/CreativeWork",
      "type": "object",
      "properties": {
        "@type": {
          "type": "string",
          "default": "schema:CreativeWork",
          "const": "schema:CreativeWork"
        },
        "schema:name": {
          "type": "string"
        },
        "schema:description": {
          "type": "string"
        },
        "schema:url": {
          "type": "string",
          "format": "uri"
        }
      },
      "required": [
        "@type",
        "schema:url"
      ]
    },
    "DefinedTerm": {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "description": "schema.org Defined Term schema",
      "type": "object",
      "properties": {
        "@type": {
          "const": "schema:DefinedTerm"
        },
        "schema:name": {
          "type": "string",
          "description": "text label for the term that is useful to human user"
        },
        "schema:identifier": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$schema": "https://json-schema.org/draft/2020-12/schema",
              "description": "Properties for a schema.org identifier",
              "type": "object",
              "properties": {
                "@type": {
                  "type": "string",
                  "const": "schema:PropertyValue"
                },
                "schema:propertyID": {
                  "type": "string",
                  "description": "identifier for the identifier schema, e.g. DOI, ARK.  Get values from https://registry.identifiers.org/registry/ for interoperability"
                },
                "schema:value": {
                  "type": "string",
                  "description": "the identifier string. E.g. 10.5066/F7VX0DMQ"
                },
                "schema:url": {
                  "type": "string",
                  "format": "uri",
                  "description": "web-resolveable string for the identifier; host name part is location of a resolver that will return some representation for the given identifier value. E.g. https://doi.org/10.5066/F7VX0DMQ "
                }
              },
              "allOf": [
                {
                  "required": [
                    "@type"
                  ]
                },
                {
                  "anyOf": [
                    {
                      "required": [
                        "schema:value"
                      ]
                    },
                    {
                      "required": [
                        "schema:url"
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        "schema:inDefinedTermSet": {
          "type": "string",
          "description": "Identifier for the controlled vocabulary responsible for this keyword."
        },
        "schema:termCode": {
          "type": "string",
          "description": "A representative code for this keyword in the controlled vocabulary (Optional).  Analogous to skos:Notation"
        }
      },
      "allOf": [
        {
          "required": [
            "@type"
          ]
        },
        {
          "anyOf": [
            {
              "required": [
                "schema:name"
              ]
            },
            {
              "required": [
                "schema:identifier"
              ]
            }
          ]
        }
      ]
    }
  }
}