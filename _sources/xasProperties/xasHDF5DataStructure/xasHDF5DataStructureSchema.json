{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "type": "object",
    "properties": {
        "@type": {
            "type": "array",
            "description": "implement as array because extensions might need to add additional types",
            "items": {"type": "string"},
            "contains": {"const": "cdi:DimensionalDataStructure"},
            "minItems": 1
        },
        "cdi:has_DataStructureComponent": {
           "type":"array",
           "items":{
                "type":"object",
                "properties":{
                    "@type": {
                        "oneOf": [
                            {"const": "cdi:DimensionComponent"},
                            {"const": "cdi:MeasureComponent"}
                        ]
                    },
                    "cdi:isDefinedBy_InstanceVariable": {
                        "type": "object",
                        "description": "this must be a reference to a variable defined in the schema:variableMeasured part of the metadata record; This condition will need to be validated by SHACL rule",
                        "properties": {
                            "@id": {"type": "string"}
                        }
                    },
                    "cdi:has": {
                        "type": "object",
                        "properties": {
                            "@type": {"const": "cdi:ValueMapping"},
                            "cdifq:hdf5path": {"type":"string"},
                            "cdifq:length": {"type":"integer"},
                            "cdifq:index": {"type":"integer",
                            "description":"Only applies to Dimension Components. The index of the dimension in ordered tuples that identify a measure component"}
                        },
                        "required": ["cdi:ValueMapping"]
                    }
                }
           }
        }
    },
    "required": [
        "schema:contentUrl",
        "@type"
    ],
    "$defs": {
        "Person": {"$ref": "../person/personSchema.json"},
        "Organization": {"$ref": "../organization/organizationSchema.json"}
    }
}